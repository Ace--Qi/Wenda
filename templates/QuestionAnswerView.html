<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>问答系统</title>
    <link href="/static/assets/css/bootstrap.css" rel="stylesheet">
    <!--external css-->
    <link href="/static/assets/font-awesome/css/font-awesome.css" rel="stylesheet"/>

    <!-- Custom styles for this template -->
    <link href="/static/assets/css/style.css" rel="stylesheet">
    <link href="/static/assets/css/style-responsive.css" rel="stylesheet">
    <script src="/static/assets/js/jquery.js"></script>
    <script src="/static/assets/js/bootstrap.min.js"></script>
    <script src="/static/assets/js/jquery-ui-1.9.2.custom.min.js"></script>
</head>
<body>
<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">学生／教师评价</h4>
            </div>
            <div class="modal-body">你对小白给出的答案还满意么</div>
            <div class="modal-footer">
                <button  type="button" class="btn btn-default" data-dismiss="modal" onclick="unsatisfied()">不满意</button>
                <button  type="button" class="btn btn-primary" data-dismiss="modal" onclick="satisfied()">满意</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<script >
     $.ajaxSetup({
            data: {csrfmiddlewaretoken: 'Pe7GdDTK8lqfVQGrLsHkl472ed5ty7IR'},
        });
        function unsatisfied() {
            $.ajax({
                type: "POST",
                url: "/evaluation",
                data: {
                    "evaluation": 0,
                    "i":questionid,
                },
                success: function (data, textStatus) {

                }
                ,
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(XMLHttpRequest.responseText);
                }
            });
            return false;
        }
        function satisfied() {
            $.ajax({
                type: "POST",
                url: "/evaluation",
                data: {
                    "evaluation": 1,
                    "i":questionid,

                },
                success: function (data, textStatus) {

                }
                ,
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(XMLHttpRequest.responseText);
                }
            });
            return false;
        }

    </script>
<section id="container">
    <!-- **********************************************************************************************************************************************************
    TOP BAR CONTENT & NOTIFICATIONS
    *********************************************************************************************************************************************************** -->
    <!--header start-->
    <header class="header black-bg">
        <div class="sidebar-toggle-box">
            <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
        </div>
        <!--logo start-->
        <a href="/test/index/" class="logo"><b>计算机语言作业平台</b></a>
        <!--logo end-->
        <div class="nav notify-row" id="top_menu">
            <!--  notification start -->
            <!--  notification end -->
        </div>
    </header>
    <!--header end-->

    <!-- **********************************************************************************************************************************************************
    MAIN SIDEBAR MENU
    *********************************************************************************************************************************************************** -->


    <!-- **********************************************************************************************************************************************************
    MAIN CONTENT
    *********************************************************************************************************************************************************** -->
    <!--main content start-->
    <section id="main-content" style="margin-right: 400px;margin-left: 400px;height: 700px">
        <section class="wrapper site-min-height">

            <div class="row mt" >
                <div class="col-lg-12" >
                    <div class="showback" style="height: 600px;width: 600px">

    <div class="row">
        <div class="col-md-6 col-md-offset-3" style="margin-right: auto;margin-left: auto">
            <div class="panel panel-default" style="height: 570px;width: 570px">
                <div class="panel-heading">
                    <h1 class="panel-title">欢迎来到智能问答系统</h1>
                </div>
                <div class="panel-body">
                    <form id="vmaig-auth-login-form" class="clearfix" method="post" role="form">
                        <div class="form-group" style="overflow: hidden ;width: 538px;height: 370px;-moz-border-radius:7px; -webkit-border-radius: 7px;">
                            <div class="input-group"  id="addul" style="  width: 538px;height: 370px;-moz-border-radius:7px; -webkit-border-radius: 7px;background-color: whitesmoke;">
                                <ul class="chat-thread" id="answerquestion"   name="swerquestion" style="width: 538px;height: 370px; overflow: auto">
	                                 <li>你好，欢迎来到问答系统</li>
                                </ul>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <textarea id="inputquestion" autofocus name="putquestion" style="width: 538px;height: 80px;-moz-border-radius:7px; -webkit-border-radius: 7px;"></textarea>
                            </div>
                            <button id="submitquestion" type="submit" class="btn btn-vmaig-auth pull-right" style="background-color: lightgray;color: whitesmoke" >发送
                        </button>
                        </div>


                    </form>
                </div>
            </div>
        </div>
    </div>


                    </div>

                </div>
            </div>

        </section>
        <! --/wrapper -->
    </section><!-- /MAIN CONTENT -->

    <!--main content end-->
    <!--footer start-->
    <footer class="footer">
        <p class="pull-left"></p>
        <p class="pull-right">&copy; 南京邮电大学 计算机学院 软件教学中心 2016</p>
    </footer>
    <!--footer end-->
</section>

 <script >
     var questionid;
     $.ajaxSetup({
            data: {csrfmiddlewaretoken: 'Pe7GdDTK8lqfVQGrLsHkl472ed5ty7IR'},
        });
        $('#vmaig-auth-login-form').submit(function (event) {
            event.preventDefault();
            $.ajax({
                type: "POST",
                url: "/send",
                data: {
                    "question": $("#inputquestion").val(),

                },
                success: function (data, textStatus) {
                    var message=data["text"];
                    $("#answerquestion").append("<li>"+$("#inputquestion").val()+"</li>")
                    $("#answerquestion").append("<li>"+message+"</li>")
                    $("#answerquestion").scrollTop($("#answerquestion")[0].scrollHeight);
                    questionid=data["answerid"];
                    var t=setTimeout("$('#myModal').modal('show')",3000);
                    }
                ,
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(XMLHttpRequest.responseText);
                }
            });
            return false;
        });
    </script>
<!-- js placed at the end of the document so the pages load faster -->
<script src="/static/assets/js/jquery.ui.touch-punch.min.js"></script>
<script class="include" type="text/javascript" src="/static/assets/js/jquery.dcjqaccordion.2.7.js"></script>
<script src="/static/assets/js/jquery.scrollTo.min.js"></script>



<!--common script for all pages-->
<script src="/static/assets/js/common-scripts.js"></script>
<!--script for this page-->

</body>
</html>
